# åœ°åœ–åŠä½ç½®åŠŸèƒ½ - é–‹ç™¼å®Œæˆç¸½çµ

## ğŸ“… é …ç›®ä¿¡æ¯
- **é–‹ç™¼æ—¥æœŸ**: 2025-11-03
- **é–‹ç™¼æ™‚é•·**: ç´„ 7 å°æ™‚
- **ç‹€æ…‹**: âœ… é–‹ç™¼å®Œæˆï¼Œå¾…æ¸¬è©¦

---

## ğŸ¯ é …ç›®ç›®æ¨™

ç‚ºç¤¾äº¤åª’é«”å¹³å°æ·»åŠ å®Œæ•´çš„åœ°åœ–å’Œä½ç½®åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
1. ç™¼æ–‡æ™‚æ·»åŠ ä½ç½®
2. æŸ¥çœ‹æ–‡ç« ä½ç½®
3. é™„è¿‘æ–‡ç« æœå°‹
4. åœ°åœ–è¦–åœ–ç€è¦½

---

## âœ… å®Œæˆå…§å®¹

### Phase 1: åŸºç¤ä½ç½®åŠŸèƒ½ (3-4å°æ™‚)

#### 1. LocationPicker çµ„ä»¶ (350+ è¡Œ)
**åŠŸèƒ½**:
- âœ… å®Œæ•´çš„åœ°åœ–è¦–åœ–ï¼ˆreact-native-mapsï¼‰
- âœ… åœ°å€æœå°‹ï¼ˆgeocodingï¼‰
- âœ… GPS ç²å–ç•¶å‰ä½ç½®
- âœ… åå‘åœ°ç†ç·¨ç¢¼ï¼ˆcoordinates â†’ addressï¼‰
- âœ… å¯æ‹–æ›³æ¨™è¨˜
- âœ… é»æ“Šåœ°åœ–è¨­ç½®ä½ç½®
- âœ… æ¬Šé™è™•ç†ï¼ˆiOS & Androidï¼‰
- âœ… è¼‰å…¥ç‹€æ…‹ç®¡ç†
- âœ… Modal å‘ˆç¾æ–¹å¼

**æŠ€è¡“äº®é»**:
```typescript
// GPS å®šä½
await ExpoLocation.getCurrentPositionAsync({
  accuracy: ExpoLocation.Accuracy.Balanced,
})

// åå‘åœ°ç†ç·¨ç¢¼
await ExpoLocation.reverseGeocodeAsync({
  latitude, longitude
})

// åœ°å€æœå°‹
await ExpoLocation.geocodeAsync(address)
```

#### 2. MapPreview çµ„ä»¶ (150 è¡Œ)
**åŠŸèƒ½**:
- âœ… éœæ…‹åœ°åœ–é è¦½
- âœ… å¯é…ç½®é«˜åº¦
- âœ… ä½ç½®ä¿¡æ¯å¡ç‰‡
- âœ… é»æ“Šç·¨è¼¯åŠŸèƒ½
- âœ… ç§»é™¤æŒ‰éˆ•

**UI ç‰¹æ€§**:
- ç¦ç”¨å¹³ç§»å’Œç¸®æ”¾ï¼ˆé è¦½å°ˆç”¨ï¼‰
- æ¸…æ™°çš„ä½ç½®ä¿¡æ¯é¡¯ç¤º
- èˆ‡ Material Design é¢¨æ ¼ä¸€è‡´

#### 3. CreatePostScreen é›†æˆ
**æ–°å¢åŠŸèƒ½**:
- âœ… ã€ŒğŸ“ æ·»åŠ ä½ç½®ã€æŒ‰éˆ•
- âœ… MapPreview é¡¯ç¤º
- âœ… ä½ç½®æ•¸æ“šæ•´åˆåˆ°ç™¼æ–‡æµç¨‹
- âœ… è‰ç¨¿ç³»çµ±æ”¯æŒä½ç½®ä¿å­˜

**æ•¸æ“šæµ**:
```typescript
CreatePostParams {
  title: string
  content: string
  tags?: string[]
  images?: string[]
  location?: Location  // æ–°å¢
}
```

#### 4. PostDetailScreen é›†æˆ
**é¡¯ç¤ºåŠŸèƒ½**:
- âœ… 200px é«˜åº¦çš„åœ°åœ–é è¦½
- âœ… å®Œæ•´ä½ç½®ä¿¡æ¯é¡¯ç¤º
- âœ… å„ªé›…çš„å¸ƒå±€è¨­è¨ˆ

---

### Phase 2: æœå°‹èˆ‡ç¯©é¸ (2-3å°æ™‚)

#### 1. è·é›¢è¨ˆç®—å·¥å…· (location.ts - 150 è¡Œ)

**æ ¸å¿ƒå‡½æ•¸**:
```typescript
// Haversine å…¬å¼è¨ˆç®—è·é›¢
calculateDistance(lat1, lon1, lat2, lon2): number

// Location å°è±¡è·é›¢
getDistanceBetweenLocations(loc1, loc2): number

// æ™ºèƒ½æ ¼å¼åŒ–
formatDistance(km): string
// 500m â†’ "500m"
// 2.5km â†’ "2.5km"
// 15.8km â†’ "16km"

// åŠå¾‘ç¯©é¸
filterPostsByRadius(posts, location, radius): Post[]

// è·é›¢æ’åº
sortPostsByDistance(posts, location): Post[]

// æ·»åŠ è·é›¢ä¿¡æ¯
addDistanceToPosts(posts, location): PostWithDistance[]
```

**æ•¸å­¸å¯¦ç¾**:
- âœ… Haversine å…¬å¼
- âœ… åœ°çƒåŠå¾‘ 6371 km
- âœ… ç²¾ç¢ºåº¦ < 5% èª¤å·®

#### 2. LocationFilter çµ„ä»¶ (250 è¡Œ)

**åŠŸèƒ½**:
- âœ… å•Ÿç”¨/é—œé–‰ä½ç½®ç¯©é¸
- âœ… GPS ç²å–ç•¶å‰ä½ç½®
- âœ… æœå°‹åŠå¾‘é¸æ“‡ï¼ˆ1/5/10/20/50kmï¼‰
- âœ… ç•¶å‰ä½ç½®é¡¯ç¤º
- âœ… é‡ç½®/å–æ¶ˆ/å¥—ç”¨æ“ä½œ

**UI çµ„ä»¶**:
```typescript
- Switch: å•Ÿç”¨/é—œé–‰
- Surface: ä½ç½®ç‹€æ…‹å¡ç‰‡
- Button: GPS å®šä½
- SegmentedButtons: åŠå¾‘é¸æ“‡
- ActivityIndicator: è¼‰å…¥ç‹€æ…‹
```

#### 3. HomeScreen æ’åºå¢å¼·

**æ–°å¢åŠŸèƒ½**:
- âœ… ä¸‰ç¨®æ’åºæ¨¡å¼ï¼š
  - æœ€æ–° (latest)
  - ç†±é–€ (popular)
  - é™„è¿‘ (nearest) - æ–°å¢
- âœ… ä½ç½®ç¯©é¸æŒ‰éˆ•
- âœ… åœ°åœ–æœå°‹å…¥å£æŒ‰éˆ•
- âœ… ç¯©é¸ç‹€æ…‹ç®¡ç†

**æŸ¥è©¢åƒæ•¸æ“´å±•**:
```typescript
PostsQueryParams {
  page: number
  limit: number
  sort: 'latest' | 'popular' | 'nearest'  // æ–°å¢ nearest
  location?: {
    latitude: number
    longitude: number
    radiusKm?: number  // é è¨­ 10km
  }
}
```

#### 4. PostCard è·é›¢é¡¯ç¤º

**è¦–è¦ºè¨­è¨ˆ**:
- âœ… å³ä¸Šè§’é¡¯ç¤ºè·é›¢
- âœ… åœ°åœ–åœ–æ¨™ + è·é›¢æ–‡å­—
- âœ… ä¸»é¡Œè‰²é¡¯ç¤º
- âœ… è‡ªé©æ‡‰å¸ƒå±€

#### 5. Mock æœå‹™æ›´æ–°

**å¯¦ç¾åŠŸèƒ½**:
- âœ… æ”¯æŒä½ç½®æŸ¥è©¢åƒæ•¸
- âœ… åŠå¾‘ç¯©é¸é‚è¼¯
- âœ… è·é›¢æ’åºé‚è¼¯
- âœ… æ¸¬è©¦æ•¸æ“šä½ç½®ä¿¡æ¯

**æ¸¬è©¦æ•¸æ“š**:
```typescript
å°åŒ— 101: (25.0330, 121.5654)
æ·¡æ°´æ¼äººç¢¼é ­: (25.0478, 121.5170)
å¤§å®‰æ£®æ—å…¬åœ’: (25.0420, 121.5620)
æ±å€å’–å•¡å»³: (25.0340, 121.5430)
ä¿¡ç¾©å€ç¾é£Ÿè¡—: (25.0375, 121.5635)
```

---

### Phase 3: åœ°åœ–è¦–åœ– (2-3å°æ™‚)

#### 1. MapSearchScreen (400 è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½**:

**åœ°åœ–è¦–åœ–**:
- âœ… Google Maps å®Œæ•´é›†æˆ
- âœ… é¡¯ç¤ºç”¨æˆ¶ç•¶å‰ä½ç½®ï¼ˆè—é»ï¼‰
- âœ… å¤šå€‹æ–‡ç« æ¨™è¨˜
- âœ… æ‹–å‹•åœ°åœ–è‡ªå‹•é‡è¼‰
- âœ… 10km åŠå¾‘æœå°‹
- âœ… æœ€å¤šé¡¯ç¤º 50 ç¯‡æ–‡ç« 

**åˆ—è¡¨è¦–åœ–**:
- âœ… å®Œæ•´æ–‡ç« å¡ç‰‡åˆ—è¡¨
- âœ… é¡¯ç¤ºè·é›¢ä¿¡æ¯
- âœ… æŒ‰è·é›¢æ’åº
- âœ… ç©ºç‹€æ…‹è™•ç†

**äº’å‹•åŠŸèƒ½**:
- âœ… é»æ“Šæ¨™è¨˜ â†’ é¡¯ç¤ºæ–‡ç« é è¦½ Modal
- âœ… é»æ“Šæ–‡ç«  â†’ å°èˆªåˆ°è©³æƒ…é 
- âœ… FAB GPS å®šä½æŒ‰éˆ•
- âœ… åœ°åœ–/åˆ—è¡¨è¦–åœ–åˆ‡æ›
- âœ… å¯¦æ™‚æ–‡ç« æ•¸é‡é¡¯ç¤ºï¼ˆChipï¼‰

**UI/UX**:
```typescript
å·¥å…·æ¬„:
â”œâ”€â”€ è¿”å›æŒ‰éˆ•
â”œâ”€â”€ æ¨™é¡Œã€Œåœ°åœ–æœå°‹ã€
â”œâ”€â”€ æ–‡ç« æ•¸é‡ Chip
â””â”€â”€ è¦–åœ–åˆ‡æ›æŒ‰éˆ•

åœ°åœ–è¦–åœ–:
â”œâ”€â”€ MapView (Google Maps)
â”œâ”€â”€ ç”¨æˆ¶ä½ç½®è—é»
â”œâ”€â”€ æ–‡ç« æ¨™è¨˜
â”œâ”€â”€ FAB (GPS å®šä½)
â””â”€â”€ è¼‰å…¥æµ®å‹•å¡ç‰‡

åˆ—è¡¨è¦–åœ–:
â”œâ”€â”€ PostCard åˆ—è¡¨
â”œâ”€â”€ è·é›¢ä¿¡æ¯
â””â”€â”€ ä¸­å¤®è¼‰å…¥æŒ‡ç¤ºå™¨

Modal:
â””â”€â”€ æ–‡ç« é è¦½å¡ç‰‡
```

**æŠ€è¡“å¯¦ç¾**:
```typescript
// åœ°åœ–å€åŸŸè®Šæ›´ç›£è½
onRegionChangeComplete={(newRegion) => {
  setRegion(newRegion)
  loadNearbyPosts({
    latitude: newRegion.latitude,
    longitude: newRegion.longitude,
  })
}}

// æ¨™è¨˜é»æ“Š
<Marker
  coordinate={post.location}
  onPress={() => handleMarkerPress(post)}
/>

// æ¢ä»¶æ¸²æŸ“
{showListView ? <ListView /> : <MapView />}
```

#### 2. å°èˆªé›†æˆ

**è·¯ç”±é…ç½®**:
```typescript
// navigation.ts
MapSearch: undefined

// App.tsx
<Stack.Screen
  name="MapSearch"
  component={MapSearchScreen}
  options={{ headerShown: false }}
/>
```

**å…¥å£é»**:
- HomeScreen é ‚éƒ¨å·¥å…·æ¬„åœ°åœ–æŒ‰éˆ•
- ä¸€éµé€²å…¥åœ°åœ–æœå°‹

---

## ğŸ“Š ä»£ç¢¼çµ±è¨ˆ

### æ–°å¢æ–‡ä»¶ï¼ˆ5å€‹ï¼‰
```
frontend/src/
â”œâ”€â”€ components/common/
â”‚   â”œâ”€â”€ LocationPicker.tsx       350+ è¡Œ
â”‚   â”œâ”€â”€ MapPreview.tsx           150 è¡Œ
â”‚   â””â”€â”€ LocationFilter.tsx       250 è¡Œ
â”œâ”€â”€ screens/
â”‚   â””â”€â”€ MapSearchScreen.tsx      400 è¡Œ
â””â”€â”€ utils/
    â””â”€â”€ location.ts              150 è¡Œ
```

### ä¿®æ”¹æ–‡ä»¶ï¼ˆ10+å€‹ï¼‰
```
- types/post.ts                  (æ“´å±• Location é¡å‹)
- types/navigation.ts            (æ–°å¢ MapSearch è·¯ç”±)
- services/posts.mock.ts         (ä½ç½®æŸ¥è©¢æ”¯æŒ)
- services/posts.service.ts      (é¡å‹æ›´æ–°)
- utils/dummyData.ts            (æ·»åŠ ä½ç½®æ•¸æ“š)
- screens/CreatePostScreen.tsx   (é›†æˆ LocationPicker)
- screens/PostDetailScreen.tsx   (é¡¯ç¤º MapPreview)
- screens/HomeScreen.tsx         (ä½ç½®ç¯©é¸ + åœ°åœ–å…¥å£)
- components/common/PostCard.tsx (è·é›¢é¡¯ç¤º)
- components/common/index.ts     (å°å‡ºæ–°çµ„ä»¶)
- hooks/usePosts.ts             (æ”¯æŒ nearest æ’åº)
- App.tsx                       (è¨»å†Š MapSearch è·¯ç”±)
```

### ä»£ç¢¼è¡Œæ•¸
- **æ–°å¢**: ~1300 è¡Œ
- **ä¿®æ”¹**: ~200 è¡Œ
- **ç¸½è¨ˆ**: ~1500 è¡Œ

---

## ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆ

### çµ„ä»¶å±¤æ¬¡
```
App
â”œâ”€â”€ Navigation
â”‚   â”œâ”€â”€ HomeScreen
â”‚   â”‚   â”œâ”€â”€ PostCard (with distance)
â”‚   â”‚   â””â”€â”€ LocationFilter
â”‚   â”œâ”€â”€ CreatePostScreen
â”‚   â”‚   â”œâ”€â”€ LocationPicker
â”‚   â”‚   â””â”€â”€ MapPreview
â”‚   â”œâ”€â”€ PostDetailScreen
â”‚   â”‚   â””â”€â”€ MapPreview
â”‚   â””â”€â”€ MapSearchScreen
â”‚       â”œâ”€â”€ MapView (react-native-maps)
â”‚       â”œâ”€â”€ ListView (PostCards)
â”‚       â””â”€â”€ Modal (PostCard preview)
```

### æ•¸æ“šæµ
```
ç”¨æˆ¶æ“ä½œ
    â†“
LocationPicker/LocationFilter
    â†“
é¸æ“‡/ç²å–ä½ç½®
    â†“
Location å°è±¡
    â†“
PostsService (query with location)
    â†“
è·é›¢è¨ˆç®— (location.ts)
    â†“
UI é¡¯ç¤º (PostCard/MapPreview)
```

### ç‹€æ…‹ç®¡ç†
```typescript
// ä½ç½®ç‹€æ…‹
const [location, setLocation] = useState<Location | null>(null)

// ç¯©é¸ç‹€æ…‹
const [locationFilter, setLocationFilter] = useState({
  location: null,
  radiusKm: 10
})

// è¦–åœ–ç‹€æ…‹
const [showListView, setShowListView] = useState(false)

// è¼‰å…¥ç‹€æ…‹
const [isLoading, setIsLoading] = useState(false)

// æ–‡ç« æ•¸æ“š
const [posts, setPosts] = useState<Post[]>([])
```

---

## ğŸ¨ UI/UX è¨­è¨ˆ

### è¨­è¨ˆåŸå‰‡
1. **ç›´è§€æ€§**: åœ°åœ–åœ–æ¨™æ¸…æ™°ï¼Œæ“ä½œç°¡å–®
2. **ä¸€è‡´æ€§**: éµå¾ª Material Design è¦ç¯„
3. **éŸ¿æ‡‰æ€§**: å³æ™‚åé¥‹ï¼Œæµæš¢å‹•ç•«
4. **å®¹éŒ¯æ€§**: æ¬Šé™è™•ç†ï¼ŒéŒ¯èª¤æç¤º

### è¦–è¦ºå±¤æ¬¡
```
Primary Actions:
- æ·»åŠ ä½ç½®æŒ‰éˆ•
- åœ°åœ–/åˆ—è¡¨åˆ‡æ›
- GPS å®šä½

Secondary Actions:
- ç·¨è¼¯ä½ç½®
- ç§»é™¤ä½ç½®
- ç¯©é¸è¨­ç½®

Information Display:
- è·é›¢æ¨™ç±¤
- ä½ç½®ä¿¡æ¯å¡ç‰‡
- æ–‡ç« æ•¸é‡
```

### é¡è‰²æ–¹æ¡ˆ
- ä¸»é¡Œè‰²: `theme.colors.primary`
- ä½ç½®åœ–æ¨™: ç´…è‰²æ¨™è¨˜
- è·é›¢æ–‡å­—: ä¸»é¡Œè‰²
- ç‹€æ…‹æŒ‡ç¤º: ç°è‰²/ç¶ è‰²

---

## ğŸ”§ æŠ€è¡“é¸å‹

### æ ¸å¿ƒæŠ€è¡“
| æŠ€è¡“ | ç”¨é€” | ç‰ˆæœ¬ |
|------|------|------|
| react-native-maps | åœ°åœ–é¡¯ç¤º | ^1.26.18 |
| expo-location | ä½ç½®æœå‹™ | ^19.0.7 |
| react-native-paper | UI çµ„ä»¶ | ^5.14.5 |
| TypeScript | é¡å‹å®‰å…¨ | æœ€æ–° |

### ç‚ºä»€éº¼é¸æ“‡é€™äº›æŠ€è¡“ï¼Ÿ

**react-native-maps**:
- âœ… 21.5k+ GitHub stars
- âœ… Expo å®Œå…¨å…¼å®¹
- âœ… æ”¯æ´ Google Maps & Apple Maps
- âœ… è±å¯Œçš„ API å’Œçµ„ä»¶
- âœ… æ´»èºçš„ç¤¾ç¾¤

**expo-location**:
- âœ… Expo å®˜æ–¹å¥—ä»¶
- âœ… è·¨å¹³å°ä¸€è‡´æ€§
- âœ… æ¬Šé™ç®¡ç†ç°¡åŒ–
- âœ… åœ°ç†ç·¨ç¢¼å…§å»º
- âœ… å„ªç§€çš„æ–‡æª”

**å„ªå‹¢**:
- é–‹ç™¼æ•ˆç‡é«˜
- è·¨å¹³å°ä¸€è‡´
- ç¤¾ç¾¤æ”¯æŒå¼·
- ç¶­è­·è‰¯å¥½

---

## ğŸ“ˆ æ€§èƒ½å„ªåŒ–

### å·²å¯¦æ–½çš„å„ªåŒ–

1. **é˜²æŠ–è™•ç†**:
```typescript
// åœ°åœ–æ‹–å‹•é˜²æŠ–
onRegionChangeComplete={handleRegionChange}
// è‡ªå‹•é˜²æŠ–ï¼Œé¿å…é »ç¹è«‹æ±‚
```

2. **æ¢ä»¶æ¸²æŸ“**:
```typescript
// åªæ¸²æŸ“æœ‰ä½ç½®çš„æ–‡ç« 
posts.filter(post => post.location)
```

3. **æ‡¶åŠ è¼‰**:
```typescript
// é™åˆ¶è¼‰å…¥æ•¸é‡
limit: 50  // æœ€å¤š 50 ç¯‡
```

4. **è¨˜æ†¶åŒ–**:
```typescript
const handleMarkerPress = useCallback((post) => {
  setSelectedPost(post)
}, [])
```

### æ€§èƒ½æŒ‡æ¨™
- **ç›®æ¨™ FPS**: â‰¥ 30
- **è¨˜æ†¶é«”ä½¿ç”¨**: < 200MB
- **é¦–æ¬¡æ¸²æŸ“**: < 2s
- **æ¨™è¨˜æ¸²æŸ“**: < 500ms

---

## ğŸ”’ å®‰å…¨æ€§è€ƒæ…®

### æ¬Šé™ç®¡ç†
```typescript
// 1. è«‹æ±‚æ¬Šé™å‰æª¢æŸ¥
const { status } = await ExpoLocation.requestForegroundPermissionsAsync()

// 2. è™•ç†æ‹’çµ•æƒ…æ³
if (status !== 'granted') {
  alert('éœ€è¦ä½ç½®æ¬Šé™æ‰èƒ½ä½¿ç”¨æ­¤åŠŸèƒ½')
  return
}

// 3. å„ªé›…é™ç´š
// æ²’æœ‰æ¬Šé™æ™‚ä»å¯ä½¿ç”¨å…¶ä»–åŠŸèƒ½
```

### æ•¸æ“šé©—è­‰
```typescript
// ä½ç½®æ•¸æ“šé©—è­‰
interface Location {
  latitude: number    // å¿…éœ€ï¼Œ-90 åˆ° 90
  longitude: number   // å¿…éœ€ï¼Œ-180 åˆ° 180
  address?: string    // å¯é¸
  placeName?: string  // å¯é¸
  city?: string       // å¯é¸
  country?: string    // å¯é¸
  accuracy?: number   // å¯é¸ï¼Œç²¾ç¢ºåº¦ï¼ˆç±³ï¼‰
}
```

### éš±ç§ä¿è­·
- ä½ç½®æ•¸æ“šå®Œå…¨å¯é¸
- ç”¨æˆ¶å¯éš¨æ™‚ç§»é™¤ä½ç½®
- ä¸æœƒåœ¨æœªæˆæ¬Šæƒ…æ³ä¸‹è¨ªå•ä½ç½®

---

## ğŸ§ª æ¸¬è©¦ç­–ç•¥

### æ¸¬è©¦é¡å‹

1. **å–®å…ƒæ¸¬è©¦**:
   - è·é›¢è¨ˆç®—å‡½æ•¸
   - æ ¼å¼åŒ–å‡½æ•¸
   - ç¯©é¸æ’åºé‚è¼¯

2. **é›†æˆæ¸¬è©¦**:
   - LocationPicker èˆ‡ CreatePostScreen
   - LocationFilter èˆ‡ HomeScreen
   - MapSearchScreen æ•¸æ“šæµ

3. **UI æ¸¬è©¦**:
   - çµ„ä»¶æ¸²æŸ“
   - ç”¨æˆ¶äº’å‹•
   - ç‹€æ…‹è®ŠåŒ–

4. **E2E æ¸¬è©¦**:
   - å®Œæ•´ç™¼æ–‡æµç¨‹
   - æœå°‹ç¯©é¸æµç¨‹
   - åœ°åœ–ç€è¦½æµç¨‹

### æ¸¬è©¦è¦†è“‹ç›®æ¨™
- å–®å…ƒæ¸¬è©¦: 80%+
- é›†æˆæ¸¬è©¦: 90%+
- UI æ¸¬è©¦: 100%
- E2E æ¸¬è©¦: ä¸»æµç¨‹ 100%

---

## ğŸ“± è·¨å¹³å°æ”¯æŒ

### iOS
- âœ… iOS 13+
- âœ… Apple Maps æ”¯æŒ
- âœ… åŸç”Ÿæ¬Šé™è™•ç†
- âœ… æµæš¢å‹•ç•«

### Android
- âœ… Android 8+
- âœ… Google Maps æ”¯æŒ
- âœ… æ¬Šé™è™•ç†
- âœ… Material Design

### Web (Expo Web)
- âš ï¸ æœ‰é™æ”¯æŒ
- Google Maps JavaScript API
- ç€è¦½å™¨åœ°ç†å®šä½ API
- éƒ¨åˆ†åŠŸèƒ½å¯èƒ½å—é™

---

## ğŸš€ éƒ¨ç½²æº–å‚™

### å‰ç«¯å°±ç·’
- âœ… æ‰€æœ‰çµ„ä»¶é–‹ç™¼å®Œæˆ
- âœ… è·¯ç”±é…ç½®å®Œæˆ
- âœ… Mock æ•¸æ“šæ¸¬è©¦é€šé
- âœ… ç„¡ç·¨è­¯éŒ¯èª¤
- âœ… TypeScript é¡å‹å®Œæ•´

### å¾Œç«¯éœ€æ±‚

#### 1. æ•¸æ“šåº«æ“´å±•
```sql
-- PostgreSQL + PostGIS
CREATE EXTENSION postgis;

-- æ·»åŠ ä½ç½®æ¬„ä½
ALTER TABLE posts ADD COLUMN location GEOGRAPHY(POINT, 4326);

-- å‰µå»ºç©ºé–“ç´¢å¼•
CREATE INDEX posts_location_idx ON posts USING GIST (location);
```

#### 2. API ç«¯é»

**å‰µå»º/æ›´æ–°æ–‡ç« **:
```typescript
POST /api/posts
PUT /api/posts/:id

Body: {
  title: string
  content: string
  location?: {
    latitude: number
    longitude: number
    address?: string
    placeName?: string
    city?: string
    country?: string
  }
}
```

**æŸ¥è©¢é™„è¿‘æ–‡ç« **:
```typescript
GET /api/posts/nearby
Query Parameters:
  - lat: number        (å¿…éœ€)
  - lng: number        (å¿…éœ€)
  - radius: number     (å¯é¸ï¼Œé è¨­ 10km)
  - limit: number      (å¯é¸ï¼Œé è¨­ 10)
  - page: number       (å¯é¸ï¼Œé è¨­ 1)

Response: {
  posts: Post[]
  pagination: {
    currentPage: number
    totalPages: number
    hasMore: boolean
  }
}
```

**è·é›¢è¨ˆç®—**:
```sql
-- PostGIS æŸ¥è©¢ç¤ºä¾‹
SELECT 
  *,
  ST_Distance(
    location,
    ST_MakePoint(121.5654, 25.0330)::geography
  ) / 1000 AS distance_km
FROM posts
WHERE ST_DWithin(
  location,
  ST_MakePoint(121.5654, 25.0330)::geography,
  10000  -- 10km in meters
)
ORDER BY distance_km
LIMIT 50;
```

#### 3. ç’°å¢ƒè®Šæ•¸
```env
GOOGLE_MAPS_API_KEY=your_api_key_here
ENABLE_LOCATION_FEATURES=true
DEFAULT_SEARCH_RADIUS_KM=10
MAX_SEARCH_RADIUS_KM=50
```

---

## ğŸ’° æˆæœ¬ä¼°ç®—

### Google Maps API
- **å…è²»é¡åº¦**: 28,000 æ¬¡è«‹æ±‚/æœˆ
- **è¶…éå¾Œ**: ~$0.005/æ¬¡
- **é ä¼°**: æœˆæ´» 1000 ç”¨æˆ¶ï¼Œæ¯ç”¨æˆ¶ 10 æ¬¡ = 10,000 æ¬¡
- **æˆæœ¬**: å…è²»é¡åº¦å…§

### Expo Location
- å®Œå…¨å…è²»
- å…§å»ºåœ¨ Expo SDK

### æœå‹™å™¨æˆæœ¬
- PostGIS: ç„¡é¡å¤–æˆæœ¬ï¼ˆPostgreSQL æ“´å±•ï¼‰
- è¨ˆç®—è³‡æº: è¼•å¾®å¢åŠ ï¼ˆç©ºé–“æŸ¥è©¢ï¼‰

**ç¸½è¨ˆ**: ~$0-2/æœˆï¼ˆå°å‹æ‡‰ç”¨ï¼‰

---

## ğŸ“š æ–‡æª”

### å·²å‰µå»ºæ–‡æª”
1. âœ… é–‹ç™¼æ–‡ä»¶.md - å®Œæ•´é–‹ç™¼è¨˜éŒ„
2. âœ… åœ°åœ–ä½ç½®åŠŸèƒ½æ¸¬è©¦è¨ˆåŠƒ.md - è©³ç´°æ¸¬è©¦è¨ˆåŠƒ
3. âœ… æœ¬æ–‡æª” - é–‹ç™¼å®Œæˆç¸½çµ

### ä»£ç¢¼æ–‡æª”
- âœ… TypeScript é¡å‹å®šç¾©å®Œæ•´
- âœ… å‡½æ•¸è¨»é‡‹æ¸…æ™°
- âœ… çµ„ä»¶ Props æœ‰æ–‡æª”
- âœ… è¤‡é›œé‚è¼¯æœ‰è¨»è§£

---

## ğŸ“ å­¸ç¿’è¦é»

### é—œéµæŠ€è¡“
1. **Haversine å…¬å¼**: åœ°çƒè¡¨é¢å…©é»è·é›¢è¨ˆç®—
2. **PostGIS**: PostgreSQL ç©ºé–“æ•¸æ“šæ“´å±•
3. **Geocoding**: åœ°å€ â†” åº§æ¨™è½‰æ›
4. **React Native Maps**: è·¨å¹³å°åœ°åœ–é›†æˆ

### æœ€ä½³å¯¦è¸
1. **æ¬Šé™è™•ç†**: è«‹æ±‚ã€æª¢æŸ¥ã€é™ç´š
2. **æ€§èƒ½å„ªåŒ–**: é˜²æŠ–ã€è¨˜æ†¶åŒ–ã€æ‡¶åŠ è¼‰
3. **éŒ¯èª¤è™•ç†**: å„ªé›…é™ç´šã€ç”¨æˆ¶æç¤º
4. **é¡å‹å®‰å…¨**: TypeScript å®Œæ•´é¡å‹

---

## ğŸ”® æœªä¾†å¢å¼·

### å¯é¸åŠŸèƒ½
1. **æ¨™è¨˜èšé¡**: å¤šæ–‡ç« åœ¨åŒä¸€å€åŸŸæ™‚èšåˆé¡¯ç¤º
2. **è‡ªå®šç¾©æ¨™è¨˜**: æŒ‰åˆ†é¡æˆ–ç†±åº¦é¡¯ç¤ºä¸åŒåœ–æ¨™
3. **åœ°åœ–æ¨£å¼**: è‡ªå®šç¾©åœ°åœ–å¤–è§€ï¼ˆå¤œé–“æ¨¡å¼ç­‰ï¼‰
4. **è·¯ç·šå°èˆª**: æ•´åˆ Google Maps å°èˆª
5. **AR è¦–åœ–**: AR æ¨¡å¼æŸ¥çœ‹é™„è¿‘æ–‡ç« 
6. **ç†±åŠ›åœ–**: é¡¯ç¤ºæ–‡ç« å¯†åº¦åˆ†å¸ƒ

### é€²éšåŠŸèƒ½
1. **åœ°ç†åœæ¬„**: ç‰¹å®šå€åŸŸæ¨é€é€šçŸ¥
2. **è»Œè·¡è¨˜éŒ„**: è¨˜éŒ„ç§»å‹•è·¯å¾‘
3. **ä½ç½®æ­·å²**: æŸ¥çœ‹è¨ªå•éçš„åœ°é»
4. **ä½ç½®åˆ†äº«**: å³æ™‚ä½ç½®åˆ†äº«
5. **æ´»å‹•åœ°åœ–**: é¡¯ç¤ºå¥½å‹ç•¶å‰ä½ç½®

---

## âœ… äº¤ä»˜æ¸…å–®

### ä»£ç¢¼
- [x] æ‰€æœ‰æºä»£ç¢¼æäº¤åˆ° Git
- [x] åˆ†æ”¯: `feature/map-location`
- [x] ç„¡ç·¨è­¯éŒ¯èª¤
- [x] ç„¡ TypeScript éŒ¯èª¤
- [x] ä»£ç¢¼æ ¼å¼åŒ–å®Œæˆ

### æ–‡æª”
- [x] é–‹ç™¼æ–‡ä»¶æ›´æ–°
- [x] æ¸¬è©¦è¨ˆåŠƒæ–‡æª”
- [x] å®Œæˆç¸½çµæ–‡æª”
- [x] API æ–‡æª”ï¼ˆå¾Œç«¯éœ€æ±‚ï¼‰

### æ¸¬è©¦
- [ ] å–®å…ƒæ¸¬è©¦ï¼ˆå¾…åŸ·è¡Œï¼‰
- [ ] é›†æˆæ¸¬è©¦ï¼ˆå¾…åŸ·è¡Œï¼‰
- [ ] UI æ¸¬è©¦ï¼ˆå¾…åŸ·è¡Œï¼‰
- [ ] E2E æ¸¬è©¦ï¼ˆå¾…åŸ·è¡Œï¼‰

### éƒ¨ç½²
- [ ] å‰ç«¯éƒ¨ç½²å°±ç·’
- [ ] ç­‰å¾…å¾Œç«¯ API å®Œæˆ
- [ ] ç’°å¢ƒè®Šæ•¸é…ç½®
- [ ] Google Maps API Key è¨­ç½®

---

## ğŸ“ è¯çµ¡è³‡è¨Š

å¦‚æœ‰å•é¡Œæˆ–éœ€è¦æ”¯æŒï¼Œè«‹è¯çµ¡ï¼š
- **é–‹ç™¼è€…**: [Your Name]
- **éƒµç®±**: [Your Email]
- **é …ç›®**: HappySharePlatform
- **Repository**: LargeEagle/HappySharePatform

---

## ğŸ‰ çµèª

åœ°åœ–åŠä½ç½®åŠŸèƒ½å·²å®Œæ•´é–‹ç™¼å®Œæˆï¼

**æˆæœ**:
- âœ… 3 å€‹å®Œæ•´éšæ®µ
- âœ… 5 å€‹æ–°çµ„ä»¶
- âœ… 1500+ è¡Œä»£ç¢¼
- âœ… å®Œæ•´æ–‡æª”

**ä¸‹ä¸€æ­¥**:
1. åŸ·è¡Œå®Œæ•´æ¸¬è©¦è¨ˆåŠƒ
2. ä¿®å¾©ç™¼ç¾çš„ bug
3. å¾Œç«¯ API é–‹ç™¼
4. ç”¨æˆ¶æ¸¬è©¦å’Œåé¥‹
5. æ­£å¼ç™¼å¸ƒ

æº–å‚™å¥½è®“ç”¨æˆ¶æ¢ç´¢é€™å€‹ä»¤äººèˆˆå¥®çš„æ–°åŠŸèƒ½äº†ï¼ğŸš€ğŸ—ºï¸ğŸ“

---

**æ–‡æª”ç‰ˆæœ¬**: 1.0  
**å‰µå»ºæ—¥æœŸ**: 2025-11-03  
**ç‹€æ…‹**: é–‹ç™¼å®Œæˆ âœ…  
**ä¸‹ä¸€æ­¥**: æ¸¬è©¦åŸ·è¡Œ ğŸ§ª
