# 圖片功能測試清單

## 📋 測試概述

**功能**: 圖片上傳和預覽  
**版本**: Phase 1 (v1.0)  
**測試日期**: 2025-11-03  
**測試範圍**: 前端 UI 功能

## ✅ 測試清單

### 1. ImageGallery 組件測試

#### 1.1 圖片選擇
- [ ] 點擊 "添加圖片" 按鈕顯示選項對話框
- [ ] 選擇 "相簿" 打開相簿選擇器
- [ ] 選擇 "相機" 打開相機
- [ ] 可以選擇單張圖片
- [ ] 可以選擇多張圖片（如果系統支持）
- [ ] 選擇圖片後正確顯示在網格中

#### 1.2 權限處理
- [ ] 首次使用時請求相簿權限
- [ ] 首次使用相機時請求相機權限
- [ ] 權限被拒絕時顯示友好提示
- [ ] 權限被授予後可以正常選擇圖片

#### 1.3 圖片管理
- [ ] 圖片按選擇順序排列
- [ ] 每張圖片顯示序號（1, 2, 3...）
- [ ] 點擊刪除按鈕顯示確認對話框
- [ ] 確認刪除後圖片被移除
- [ ] 取消刪除後圖片保留
- [ ] 刪除後序號自動更新

#### 1.4 數量限制
- [ ] 顯示 "已選擇 X/9 張圖片"
- [ ] 達到 9 張時 "添加" 按鈕禁用
- [ ] 嘗試添加第 10 張時顯示提示
- [ ] 刪除圖片後可以再次添加

#### 1.5 圖片預覽
- [ ] 點擊圖片觸發 onImagePress 回調
- [ ] 可以傳遞圖片索引

#### 1.6 視覺效果
- [ ] 圖片正確縮放和裁剪
- [ ] 刪除按鈕在右上角
- [ ] 序號標記在左下角
- [ ] 橫向滾動流暢

### 2. ImageViewer 組件測試

#### 2.1 打開與關閉
- [ ] visible=true 時顯示 Modal
- [ ] visible=false 時隱藏 Modal
- [ ] 點擊關閉按鈕可以關閉
- [ ] Modal 有淡入淡出動畫

#### 2.2 圖片展示
- [ ] 圖片全螢幕顯示
- [ ] 圖片保持原始比例
- [ ] 圖片居中顯示
- [ ] 黑色背景

#### 2.3 圖片切換
- [ ] 左滑切換到下一張
- [ ] 右滑切換到上一張
- [ ] 滑動流暢，無卡頓
- [ ] 第一張時無法右滑
- [ ] 最後一張時無法左滑

#### 2.4 UI 元素
- [ ] 頂部顯示 "X/總數"
- [ ] 頂部有關閉按鈕
- [ ] 底部有分頁指示器
- [ ] 當前圖片的圓點高亮
- [ ] 狀態列隱藏（iOS）

#### 2.5 初始位置
- [ ] 打開時顯示 initialIndex 指定的圖片
- [ ] 切換圖片後重新打開，顯示新的 initialIndex

### 3. ImageCarousel 組件測試

#### 3.1 輪播功能
- [ ] 圖片橫向排列
- [ ] 左右滑動切換圖片
- [ ] 滑動有分頁效果
- [ ] 滑動流暢

#### 3.2 分頁指示器
- [ ] 右下角顯示 "X/總數"
- [ ] 數字隨滑動更新
- [ ] 只有多張圖片時顯示

#### 3.3 點擊功能
- [ ] 點擊圖片觸發 onImagePress
- [ ] 傳遞正確的圖片索引

#### 3.4 高度適配
- [ ] 使用指定的 height prop
- [ ] 圖片正確縮放

### 4. CreatePostScreen 整合測試

#### 4.1 圖片選擇
- [ ] "📸 圖片" 區域正確顯示
- [ ] ImageGallery 組件正確渲染
- [ ] 可以添加圖片
- [ ] 可以刪除圖片
- [ ] 可以預覽圖片

#### 4.2 ImageViewer 整合
- [ ] 點擊圖片打開全螢幕查看
- [ ] ImageViewer 顯示正確的圖片
- [ ] 可以切換和關閉

#### 4.3 草稿功能
- [ ] 選擇圖片後保存草稿
- [ ] 草稿包含圖片 URI
- [ ] 重新打開時恢復圖片
- [ ] 圖片順序正確保留

#### 4.4 發布功能
- [ ] 圖片數據包含在 createPost 參數中
- [ ] 發布成功後清除草稿
- [ ] 發布失敗時圖片保留

### 5. PostCard 整合測試

#### 5.1 圖片顯示
- [ ] post.images 有數據時顯示輪播
- [ ] post.images 為空時不顯示
- [ ] ImageCarousel 正確渲染
- [ ] 圖片高度 200px

#### 5.2 視覺效果
- [ ] 圖片延伸到卡片邊緣
- [ ] 分頁指示器顯示
- [ ] 與其他內容間距正確

#### 5.3 滑動功能
- [ ] 可以左右滑動查看圖片
- [ ] 不影響卡片的點擊

### 6. PostDetailScreen 整合測試

#### 6.1 圖片顯示
- [ ] post.images 有數據時顯示輪播
- [ ] ImageCarousel 正確渲染
- [ ] 圖片高度 300px
- [ ] 圖片在內容下方、位置上方

#### 6.2 全螢幕查看
- [ ] 點擊圖片打開 ImageViewer
- [ ] 顯示正確的圖片
- [ ] 可以切換圖片
- [ ] 可以關閉查看器

#### 6.3 Portal 整合
- [ ] ImageViewer 在 Portal 中渲染
- [ ] 不影響其他 Modal（評論）

### 7. 跨平台測試

#### 7.1 iOS 測試
- [ ] 相簿選擇正常
- [ ] 相機拍照正常
- [ ] 權限提示正常
- [ ] UI 顯示正常
- [ ] 滑動流暢

#### 7.2 Android 測試
- [ ] 相簿選擇正常
- [ ] 相機拍照正常
- [ ] 權限提示正常
- [ ] UI 顯示正常
- [ ] 滑動流暢

#### 7.3 不同螢幕尺寸
- [ ] 小螢幕手機（< 5"）
- [ ] 中等螢幕手機（5-6"）
- [ ] 大螢幕手機（> 6"）
- [ ] 平板設備

### 8. 性能測試

#### 8.1 加載性能
- [ ] 選擇圖片後立即顯示
- [ ] 滑動無延遲
- [ ] 打開全螢幕無延遲

#### 8.2 內存測試
- [ ] 選擇 9 張圖片不崩潰
- [ ] 長時間使用不內存洩漏
- [ ] 切換頁面時正確釋放

#### 8.3 流暢度測試
- [ ] 滑動輪播 60fps
- [ ] 打開關閉動畫流暢
- [ ] 不阻塞主線程

### 9. 邊界情況測試

#### 9.1 空狀態
- [ ] 沒有圖片時不顯示輪播
- [ ] 只有 1 張圖片時不顯示指示器
- [ ] 圖片數組為 undefined 時不崩潰

#### 9.2 錯誤處理
- [ ] 圖片 URI 無效時顯示佔位符
- [ ] 圖片加載失敗時友好提示
- [ ] 權限被拒絕時友好提示
- [ ] 選擇圖片失敗時提示

#### 9.3 極端情況
- [ ] 連續快速點擊添加按鈕
- [ ] 快速滑動切換圖片
- [ ] 在加載時關閉頁面

### 10. 用戶體驗測試

#### 10.1 視覺設計
- [ ] 符合應用整體風格
- [ ] 圖標清晰易懂
- [ ] 顏色搭配合理
- [ ] 字體大小適中

#### 10.2 交互設計
- [ ] 操作直觀易懂
- [ ] 反饋及時明確
- [ ] 動畫自然流暢
- [ ] 手勢符合習慣

#### 10.3 可訪問性
- [ ] 按鈕點擊區域足夠大
- [ ] 文字對比度足夠
- [ ] 支持屏幕閱讀器（基礎）

## 📊 測試統計

### 測試項目分類
| 類別 | 測試項數 | 完成數 | 通過率 |
|------|----------|--------|--------|
| ImageGallery | 20 | 0 | 0% |
| ImageViewer | 14 | 0 | 0% |
| ImageCarousel | 8 | 0 | 0% |
| CreatePost 整合 | 10 | 0 | 0% |
| PostCard 整合 | 6 | 0 | 0% |
| PostDetail 整合 | 6 | 0 | 0% |
| 跨平台 | 10 | 0 | 0% |
| 性能 | 6 | 0 | 0% |
| 邊界情況 | 9 | 0 | 0% |
| 用戶體驗 | 9 | 0 | 0% |
| **總計** | **98** | **0** | **0%** |

## 🐛 已知問題

### 高優先級
- 無

### 中優先級
- 無

### 低優先級
- 無

## 📝 測試備註

### 測試環境
- **iOS**: 未測試
- **Android**: 未測試
- **模擬器**: 未測試
- **真機**: 未測試

### 需要的測試設備
- [ ] iPhone (iOS 13+)
- [ ] Android 手機 (Android 5.0+)
- [ ] iPad
- [ ] Android 平板

### 測試前準備
1. 確保應用已安裝
2. 準備測試圖片（不同尺寸、格式）
3. 準備測試賬號
4. 清除應用數據（測試初始狀態）

### 測試後清理
1. 刪除測試文章
2. 清除草稿
3. 重置應用狀態

## 📞 問題反饋

### 發現 Bug？
請記錄以下信息：
- [ ] Bug 描述
- [ ] 重現步驟
- [ ] 預期行為
- [ ] 實際行為
- [ ] 設備信息
- [ ] 應用版本
- [ ] 截圖/錄屏

### 提交位置
- GitHub Issues
- 內部 Bug 追蹤系統
- 測試報告文檔

---

**文檔版本**: 1.0  
**最後更新**: 2025-11-03  
**測試狀態**: 待執行 ⏳
